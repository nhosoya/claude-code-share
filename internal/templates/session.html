{{define "title"}}Session {{.SessionID}}{{end}}
{{define "content"}}
<nav class="breadcrumb">
  <a href="/">Home</a> &gt; <a href="/projects/{{.Slug}}">{{.Path}}</a> &gt; Session
</nav>
<div class="page-header">{{.SessionID}}</div>
<div class="chat-container">
  <div class="stats">
    {{if .Conversation.Model}}{{.Conversation.Model}} &middot; {{end}}
    In: {{.Conversation.TotalInput}} tokens &middot;
    Out: {{.Conversation.TotalOutput}} tokens
  </div>
  {{range .Conversation.Entries}}
  <div class="message-row {{.Type}}">
    {{if eq .Type "user"}}
      <div class="avatar user-avatar">U</div>
    {{else}}
      <div class="avatar assistant-avatar">C</div>
    {{end}}
    <div class="bubble-wrap">
      <div class="bubble">
        {{if eq .Type "user"}}
          {{if .Message.Content.Text}}
            <div class="message-content">{{.Message.Content.Text}}</div>
          {{else if .Message.Content.Blocks}}
            <details class="tool-use">
              <summary>Tool results ({{len .Message.Content.Blocks}} item{{if ne (len .Message.Content.Blocks) 1}}s{{end}})</summary>
              {{range .Message.Content.Blocks}}
                <div class="tool-result">[{{.Type}}] {{.ToolUseID}}</div>
              {{end}}
            </details>
          {{end}}
        {{else if eq .Type "assistant"}}
          {{range .Message.Content.Blocks}}
            {{if eq .Type "text"}}
              <div class="message-content">{{.Text}}</div>
            {{else if eq .Type "tool_use"}}
              <details class="tool-use">
                <summary>{{.Name}}</summary>
                <pre>{{formatToolInput .Input}}</pre>
              </details>
            {{end}}
          {{end}}
        {{end}}
        <span class="timestamp">{{.Timestamp.Format "15:04"}}</span>
      </div>
    </div>
  </div>
  {{end}}
</div>
{{end}}
